import{S as ge,i as Se,s as Ie,e as P,k as R,c as L,a as B,d as f,m as V,b as y,g as u,Y as p,w as z,x as A,y as H,q as d,o as S,B as J,t as I,h as E,j as Y,l as ce,p as le,ac as Ee,n as ne,E as ue}from"../../chunks/index-f7a6ba17.js";import{g as me}from"../../chunks/colours-f9de8a07.js";import{B as se}from"../../chunks/Button-a11b11dc.js";import{L as ie}from"../../chunks/Ripple-c9d7f540.js";import{h as C}from"../../chunks/moment-9ea79f3d.js";import{u as we}from"../../chunks/pace-0accffcb.js";function _e(r,e,l){const t=r.slice();return t[6]=e[l],t}function de(r){let e,l,t,i;return{c(){e=P("div"),l=P("div"),t=R(),i=P("div"),this.h()},l(s){e=L(s,"DIV",{class:!0});var a=B(e);l=L(a,"DIV",{class:!0}),B(l).forEach(f),t=V(a),i=L(a,"DIV",{class:!0}),B(i).forEach(f),a.forEach(f),this.h()},h(){y(l,"class","ringring svelte-snrt10"),y(i,"class","circle svelte-snrt10"),y(e,"class","ring-container svelte-snrt10")},m(s,a){u(s,e,a),p(e,l),p(e,t),p(e,i)},d(s){s&&f(e)}}}function De(r){let e=r[6].name+"",l;return{c(){l=I(e)},l(t){l=E(t,e)},m(t,i){u(t,l,i)},p(t,i){i&1&&e!==(e=t[6].name+"")&&Y(l,e)},d(t){t&&f(l)}}}function Ne(r){let e,l;return e=new ie({props:{$$slots:{default:[De]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&513&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function $e(r){let e,l,t,i;return l=new se({props:{href:`/runner/${r[6].userID}`,class:"runners-button",style:"background-color: "+me(r[6].userID)+"; color: black",variant:"outlined",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),{c(){e=P("p"),z(l.$$.fragment),t=R(),this.h()},l(s){e=L(s,"P",{class:!0});var a=B(e);A(l.$$.fragment,a),t=V(a),a.forEach(f),this.h()},h(){y(e,"class","runner svelte-snrt10")},m(s,a){u(s,e,a),H(l,e,null),p(e,t),i=!0},p(s,a){const h={};a&1&&(h.href=`/runner/${s[6].userID}`),a&1&&(h.style="background-color: "+me(s[6].userID)+"; color: black"),a&513&&(h.$$scope={dirty:a,ctx:s}),l.$set(h)},i(s){i||(d(l.$$.fragment,s),i=!0)},o(s){S(l.$$.fragment,s),i=!1},d(s){s&&f(e),J(l)}}}function Pe(r){let e,l;return e=new se({props:{disabled:r[3],class:"start-button",variant:"raised",$$slots:{default:[Re]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&8&&(s.disabled=t[3]),i&512&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Le(r){let e,l,t=C(r[0].startTime).format("dddd: h:mma")+"",i;return{c(){e=P("p"),l=I("Started: "),i=I(t)},l(s){e=L(s,"P",{});var a=B(e);l=E(a,"Started: "),i=E(a,t),a.forEach(f)},m(s,a){u(s,e,a),p(e,l),p(e,i)},p(s,a){a&1&&t!==(t=C(s[0].startTime).format("dddd: h:mma")+"")&&Y(i,t)},i:ue,o:ue,d(s){s&&f(e)}}}function Be(r){let e;return{c(){e=I("START")},l(l){e=E(l,"START")},m(l,t){u(l,e,t)},d(l){l&&f(e)}}}function Re(r){let e,l;return e=new ie({props:{$$slots:{default:[Be]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&512&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function pe(r){let e,l,t=C(r[0].endTime).format("ddd: h:mma")+"",i;return{c(){e=P("p"),l=I("Ended: "),i=I(t)},l(s){e=L(s,"P",{});var a=B(e);l=E(a,"Ended: "),i=E(a,t),a.forEach(f)},m(s,a){u(s,e,a),p(e,l),p(e,i)},p(s,a){a&1&&t!==(t=C(s[0].endTime).format("ddd: h:mma")+"")&&Y(i,t)},d(s){s&&f(e)}}}function he(r){let e,l,t=C(r[0].estimatedStartTime).format("ddd: h:mma")+"",i;return{c(){e=P("p"),l=I("Estimated start: "),i=I(t)},l(s){e=L(s,"P",{});var a=B(e);l=E(a,"Estimated start: "),i=E(a,t),a.forEach(f)},m(s,a){u(s,e,a),p(e,l),p(e,i)},p(s,a){a&1&&t!==(t=C(s[0].estimatedStartTime).format("ddd: h:mma")+"")&&Y(i,t)},d(s){s&&f(e)}}}function be(r){let e,l,t=C(r[0].estimatedEndTime).format("ddd: h:mma")+"",i;return{c(){e=P("p"),l=I("Estimated end: "),i=I(t)},l(s){e=L(s,"P",{});var a=B(e);l=E(a,"Estimated end: "),i=E(a,t),a.forEach(f)},m(s,a){u(s,e,a),p(e,l),p(e,i)},p(s,a){a&1&&t!==(t=C(s[0].estimatedEndTime).format("ddd: h:mma")+"")&&Y(i,t)},d(s){s&&f(e)}}}function ve(r){let e,l;return e=new se({props:{href:`/section/${parseInt(r[1])-1}`,variant:"outlined",$$slots:{default:[je]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&2&&(s.href=`/section/${parseInt(t[1])-1}`),i&512&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ve(r){let e;return{c(){e=I("Previous Section")},l(l){e=E(l,"Previous Section")},m(l,t){u(l,e,t)},d(l){l&&f(e)}}}function je(r){let e,l;return e=new ie({props:{$$slots:{default:[Ve]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&512&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function ke(r){let e,l;return e=new se({props:{href:`/section/${parseInt(r[1])+1}`,variant:"outlined",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&2&&(s.href=`/section/${parseInt(t[1])+1}`),i&512&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ce(r){let e;return{c(){e=I("Next Section")},l(l){e=E(l,"Next Section")},m(l,t){u(l,e,t)},d(l){l&&f(e)}}}function Oe(r){let e,l;return e=new ie({props:{$$slots:{default:[Ce]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&512&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function qe(r){let e,l,t=r[0].startLocation+"",i,s,a=r[0].endLocation+"",h,F,w,j,re,ee,O,te,b,v,G,K,M,Q,W,X,Z,D=r[0].startTime&&!r[0].endTime&&de(),U=r[0].users,c=[];for(let n=0;n<U.length;n+=1)c[n]=$e(_e(r,U,n));const Te=n=>S(c[n],1,1,()=>{c[n]=null}),oe=[Le,Pe],q=[];function fe(n,o){return n[0].startTime?0:n[2]?1:-1}~(b=fe(r))&&(v=q[b]=oe[b](r));let k=r[0].endTime&&pe(r),T=r[0].estimatedStartTime&&he(r),g=r[0].estimatedEndTime&&be(r),m=r[1]!=="1"&&ve(r),_=r[1]!=="21"&&ke(r);return{c(){e=P("div"),l=P("h1"),i=I(t),s=I(" to "),h=I(a),F=R(),D&&D.c(),w=R(),j=P("p"),re=I("Runners:"),ee=R(),O=P("div");for(let n=0;n<c.length;n+=1)c[n].c();te=R(),v&&v.c(),G=R(),k&&k.c(),K=R(),T&&T.c(),M=R(),g&&g.c(),Q=R(),m&&m.c(),W=R(),_&&_.c(),X=ce(),this.h()},l(n){e=L(n,"DIV",{class:!0});var o=B(e);l=L(o,"H1",{});var N=B(l);i=E(N,t),s=E(N," to "),h=E(N,a),N.forEach(f),F=V(o),D&&D.l(o),o.forEach(f),w=V(n),j=L(n,"P",{});var $=B(j);re=E($,"Runners:"),$.forEach(f),ee=V(n),O=L(n,"DIV",{class:!0});var x=B(O);for(let ae=0;ae<c.length;ae+=1)c[ae].l(x);x.forEach(f),te=V(n),v&&v.l(n),G=V(n),k&&k.l(n),K=V(n),T&&T.l(n),M=V(n),g&&g.l(n),Q=V(n),m&&m.l(n),W=V(n),_&&_.l(n),X=ce(),this.h()},h(){y(e,"class","title-container svelte-snrt10"),y(O,"class","runners svelte-snrt10")},m(n,o){u(n,e,o),p(e,l),p(l,i),p(l,s),p(l,h),p(e,F),D&&D.m(e,null),u(n,w,o),u(n,j,o),p(j,re),u(n,ee,o),u(n,O,o);for(let N=0;N<c.length;N+=1)c[N].m(O,null);u(n,te,o),~b&&q[b].m(n,o),u(n,G,o),k&&k.m(n,o),u(n,K,o),T&&T.m(n,o),u(n,M,o),g&&g.m(n,o),u(n,Q,o),m&&m.m(n,o),u(n,W,o),_&&_.m(n,o),u(n,X,o),Z=!0},p(n,[o]){if((!Z||o&1)&&t!==(t=n[0].startLocation+"")&&Y(i,t),(!Z||o&1)&&a!==(a=n[0].endLocation+"")&&Y(h,a),n[0].startTime&&!n[0].endTime?D||(D=de(),D.c(),D.m(e,null)):D&&(D.d(1),D=null),o&1){U=n[0].users;let $;for($=0;$<U.length;$+=1){const x=_e(n,U,$);c[$]?(c[$].p(x,o),d(c[$],1)):(c[$]=$e(x),c[$].c(),d(c[$],1),c[$].m(O,null))}for(ne(),$=U.length;$<c.length;$+=1)Te($);le()}let N=b;b=fe(n),b===N?~b&&q[b].p(n,o):(v&&(ne(),S(q[N],1,1,()=>{q[N]=null}),le()),~b?(v=q[b],v?v.p(n,o):(v=q[b]=oe[b](n),v.c()),d(v,1),v.m(G.parentNode,G)):v=null),n[0].endTime?k?k.p(n,o):(k=pe(n),k.c(),k.m(K.parentNode,K)):k&&(k.d(1),k=null),n[0].estimatedStartTime?T?T.p(n,o):(T=he(n),T.c(),T.m(M.parentNode,M)):T&&(T.d(1),T=null),n[0].estimatedEndTime?g?g.p(n,o):(g=be(n),g.c(),g.m(Q.parentNode,Q)):g&&(g.d(1),g=null),n[1]!=="1"?m?(m.p(n,o),o&2&&d(m,1)):(m=ve(n),m.c(),d(m,1),m.m(W.parentNode,W)):m&&(ne(),S(m,1,1,()=>{m=null}),le()),n[1]!=="21"?_?(_.p(n,o),o&2&&d(_,1)):(_=ke(n),_.c(),d(_,1),_.m(X.parentNode,X)):_&&(ne(),S(_,1,1,()=>{_=null}),le())},i(n){if(!Z){for(let o=0;o<U.length;o+=1)d(c[o]);d(v),d(m),d(_),Z=!0}},o(n){c=c.filter(Boolean);for(let o=0;o<c.length;o+=1)S(c[o]);S(v),S(m),S(_),Z=!1},d(n){n&&f(e),D&&D.d(),n&&f(w),n&&f(j),n&&f(ee),n&&f(O),Ee(c,n),n&&f(te),~b&&q[b].d(n),n&&f(G),k&&k.d(n),n&&f(K),T&&T.d(n),n&&f(M),g&&g.d(n),n&&f(Q),m&&m.d(n),n&&f(W),_&&_.d(n),n&&f(X)}}}async function Ge({params:r,fetch:e}){const l="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com",t=r.sectionId,i=await e(`${l}/sections`),s=await i.json(),a=we(s),h=a.find(j=>j.sectionID===t);let w=!!(t>1?a.find(j=>j.sectionID===`${parseInt(t)-1}`):{}).startTime&&!h.startTime||t==="1"&&!h.startTime;return{status:i.status,props:{section:h,sectionId:t,canStart:w}}}function ze(r,e,l){const t="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com";let{section:i}=e,{sectionId:s}=e,{canStart:a}=e,h;const F=async()=>{l(3,h=!0);const w=C().toISOString();await fetch(`${t}/sections/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sectionID:s,startTime:w})}),l(3,h=!1)};return r.$$set=w=>{"section"in w&&l(0,i=w.section),"sectionId"in w&&l(1,s=w.sectionId),"canStart"in w&&l(2,a=w.canStart)},[i,s,a,h,F]}class Ke extends ge{constructor(e){super();Se(this,e,ze,qe,Ie,{section:0,sectionId:1,canStart:2})}}export{Ke as default,Ge as load};
