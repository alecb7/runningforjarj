import{S as de,i as he,s as be,e as N,k as B,c as P,a as A,d as f,m as V,b as K,g as p,Y as S,w as C,x as O,y as q,q as _,o as g,B as z,t as w,h as D,j as Q,l as oe,p as y,a7 as ve,n as x,E as ie}from"../../chunks/index-140bc288.js";import{g as ae}from"../../chunks/colours-f9de8a07.js";import{B as ee}from"../../chunks/Button-d5e97f4c.js";import{L as te}from"../../chunks/Ripple-dfc7c852.js";import{h as W}from"../../chunks/moment-9ea79f3d.js";function fe(o,e,n){const t=o.slice();return t[8]=e[n],t}function ce(o){let e,n,t,s;return{c(){e=N("div"),n=N("div"),t=B(),s=N("div"),this.h()},l(r){e=P(r,"DIV",{class:!0});var i=A(e);n=P(i,"DIV",{class:!0}),A(n).forEach(f),t=V(i),s=P(i,"DIV",{class:!0}),A(s).forEach(f),i.forEach(f),this.h()},h(){K(n,"class","ringring svelte-snrt10"),K(s,"class","circle svelte-snrt10"),K(e,"class","ring-container svelte-snrt10")},m(r,i){p(r,e,i),S(e,n),S(e,t),S(e,s)},d(r){r&&f(e)}}}function ge(o){let e=o[8].name+"",n;return{c(){n=w(e)},l(t){n=D(t,e)},m(t,s){p(t,n,s)},p(t,s){s&1&&e!==(e=t[8].name+"")&&Q(n,e)},d(t){t&&f(n)}}}function ke(o){let e,n;return e=new te({props:{$$slots:{default:[ge]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&2049&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function ue(o){let e,n,t,s;return n=new ee({props:{href:`/runner/${o[8].userID}`,class:"runners-button",style:"background-color: "+ae(o[8].userID)+"; color: black",variant:"outlined",$$slots:{default:[ke]},$$scope:{ctx:o}}}),{c(){e=N("p"),C(n.$$.fragment),t=B(),this.h()},l(r){e=P(r,"P",{class:!0});var i=A(e);O(n.$$.fragment,i),t=V(i),i.forEach(f),this.h()},h(){K(e,"class","runner svelte-snrt10")},m(r,i){p(r,e,i),q(n,e,null),S(e,t),s=!0},p(r,i){const k={};i&1&&(k.href=`/runner/${r[8].userID}`),i&1&&(k.style="background-color: "+ae(r[8].userID)+"; color: black"),i&2049&&(k.$$scope={dirty:i,ctx:r}),n.$set(k)},i(r){s||(_(n.$$.fragment,r),s=!0)},o(r){g(n.$$.fragment,r),s=!1},d(r){r&&f(e),z(n)}}}function Ie(o){let e,n;return e=new ee({props:{disabled:o[3],class:"start-button",variant:"raised",$$slots:{default:[we]},$$scope:{ctx:o}}}),e.$on("click",o[4]),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.disabled=t[3]),s&2048&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Se(o){let e,n,t=W(o[0].startTime).format("dddd: h:mmA")+"",s;return{c(){e=N("p"),n=w("Started: "),s=w(t)},l(r){e=P(r,"P",{});var i=A(e);n=D(i,"Started: "),s=D(i,t),i.forEach(f)},m(r,i){p(r,e,i),S(e,n),S(e,s)},p(r,i){i&1&&t!==(t=W(r[0].startTime).format("dddd: h:mmA")+"")&&Q(s,t)},i:ie,o:ie,d(r){r&&f(e)}}}function Te(o){let e;return{c(){e=w("START")},l(n){e=D(n,"START")},m(n,t){p(n,e,t)},d(n){n&&f(e)}}}function we(o){let e,n;return e=new te({props:{$$slots:{default:[Te]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&2048&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function me(o){let e,n,t=W(o[0].endTime).format("dddd: h:mmA")+"",s;return{c(){e=N("p"),n=w("Ended: "),s=w(t)},l(r){e=P(r,"P",{});var i=A(e);n=D(i,"Ended: "),s=D(i,t),i.forEach(f)},m(r,i){p(r,e,i),S(e,n),S(e,s)},p(r,i){i&1&&t!==(t=W(r[0].endTime).format("dddd: h:mmA")+"")&&Q(s,t)},d(r){r&&f(e)}}}function _e(o){let e,n;return e=new ee({props:{href:`/section/${parseInt(o[1])-1}`,variant:"outlined",$$slots:{default:[Ee]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.href=`/section/${parseInt(t[1])-1}`),s&2048&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function De(o){let e;return{c(){e=w("Previous Section")},l(n){e=D(n,"Previous Section")},m(n,t){p(n,e,t)},d(n){n&&f(e)}}}function Ee(o){let e,n;return e=new te({props:{$$slots:{default:[De]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&2048&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function $e(o){let e,n;return e=new ee({props:{href:`/section/${parseInt(o[1])+1}`,variant:"outlined",$$slots:{default:[Pe]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&2&&(r.href=`/section/${parseInt(t[1])+1}`),s&2048&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Ne(o){let e;return{c(){e=w("Next Section")},l(n){e=D(n,"Next Section")},m(n,t){p(n,e,t)},d(n){n&&f(e)}}}function Pe(o){let e,n;return e=new te({props:{$$slots:{default:[Ne]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){const r={};s&2048&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Ae(o){let e,n,t=o[0].startLocation+"",s,r,i=o[0].endLocation+"",k,L,E,d,ne,X,R,Z,h,b,J,U,Y,F,G,I=o[0].startTime&&!o[0].endTime&&ce(),H=o[0].users,c=[];for(let l=0;l<H.length;l+=1)c[l]=ue(fe(o,H,l));const pe=l=>g(c[l],1,1,()=>{c[l]=null}),se=[Se,Ie],j=[];function re(l,a){return l[0].startTime?0:l[2]?1:-1}~(h=re(o))&&(b=j[h]=se[h](o));let v=o[0].endTime&&me(o),u=o[1]!=="1"&&_e(o),m=o[1]!=="21"&&$e(o);return{c(){e=N("div"),n=N("h1"),s=w(t),r=w(" to "),k=w(i),L=B(),I&&I.c(),E=B(),d=N("p"),ne=w("Runners:"),X=B(),R=N("div");for(let l=0;l<c.length;l+=1)c[l].c();Z=B(),b&&b.c(),J=B(),v&&v.c(),U=B(),u&&u.c(),Y=B(),m&&m.c(),F=oe(),this.h()},l(l){e=P(l,"DIV",{class:!0});var a=A(e);n=P(a,"H1",{});var T=A(n);s=D(T,t),r=D(T," to "),k=D(T,i),T.forEach(f),L=V(a),I&&I.l(a),a.forEach(f),E=V(l),d=P(l,"P",{});var $=A(d);ne=D($,"Runners:"),$.forEach(f),X=V(l),R=P(l,"DIV",{class:!0});var M=A(R);for(let le=0;le<c.length;le+=1)c[le].l(M);M.forEach(f),Z=V(l),b&&b.l(l),J=V(l),v&&v.l(l),U=V(l),u&&u.l(l),Y=V(l),m&&m.l(l),F=oe(),this.h()},h(){K(e,"class","title-container svelte-snrt10"),K(R,"class","runners svelte-snrt10")},m(l,a){p(l,e,a),S(e,n),S(n,s),S(n,r),S(n,k),S(e,L),I&&I.m(e,null),p(l,E,a),p(l,d,a),S(d,ne),p(l,X,a),p(l,R,a);for(let T=0;T<c.length;T+=1)c[T].m(R,null);p(l,Z,a),~h&&j[h].m(l,a),p(l,J,a),v&&v.m(l,a),p(l,U,a),u&&u.m(l,a),p(l,Y,a),m&&m.m(l,a),p(l,F,a),G=!0},p(l,[a]){if((!G||a&1)&&t!==(t=l[0].startLocation+"")&&Q(s,t),(!G||a&1)&&i!==(i=l[0].endLocation+"")&&Q(k,i),l[0].startTime&&!l[0].endTime?I||(I=ce(),I.c(),I.m(e,null)):I&&(I.d(1),I=null),a&1){H=l[0].users;let $;for($=0;$<H.length;$+=1){const M=fe(l,H,$);c[$]?(c[$].p(M,a),_(c[$],1)):(c[$]=ue(M),c[$].c(),_(c[$],1),c[$].m(R,null))}for(x(),$=H.length;$<c.length;$+=1)pe($);y()}let T=h;h=re(l),h===T?~h&&j[h].p(l,a):(b&&(x(),g(j[T],1,1,()=>{j[T]=null}),y()),~h?(b=j[h],b?b.p(l,a):(b=j[h]=se[h](l),b.c()),_(b,1),b.m(J.parentNode,J)):b=null),l[0].endTime?v?v.p(l,a):(v=me(l),v.c(),v.m(U.parentNode,U)):v&&(v.d(1),v=null),l[1]!=="1"?u?(u.p(l,a),a&2&&_(u,1)):(u=_e(l),u.c(),_(u,1),u.m(Y.parentNode,Y)):u&&(x(),g(u,1,1,()=>{u=null}),y()),l[1]!=="21"?m?(m.p(l,a),a&2&&_(m,1)):(m=$e(l),m.c(),_(m,1),m.m(F.parentNode,F)):m&&(x(),g(m,1,1,()=>{m=null}),y())},i(l){if(!G){for(let a=0;a<H.length;a+=1)_(c[a]);_(b),_(u),_(m),G=!0}},o(l){c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)g(c[a]);g(b),g(u),g(m),G=!1},d(l){l&&f(e),I&&I.d(),l&&f(E),l&&f(d),l&&f(X),l&&f(R),ve(c,l),l&&f(Z),~h&&j[h].d(l),l&&f(J),v&&v.d(l),l&&f(U),u&&u.d(l),l&&f(Y),m&&m.d(l),l&&f(F)}}}async function Oe({params:o,fetch:e}){const n="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com",t=o.sectionId,s=await e(`${n}/sections`),r=await s.json(),i=r.find(E=>E.sectionID===t),k=t>1?r.find(E=>E.sectionID===`${parseInt(t)-1}`):{};let L=!!k.startTime&&!i.startTime;return{status:s.status,props:{section:i,previousSection:k,sectionId:t,canStart:L}}}function Le(o,e,n){const t="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com";let{section:s}=e,{previousSection:r}=e,{sectionId:i}=e,{canStart:k}=e,L;s.startTime;const E=async()=>{n(3,L=!0);const d=W().toISOString();await fetch(`${t}/sections/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sectionID:i,startTime:d})}),n(3,L=!1)};return o.$$set=d=>{"section"in d&&n(0,s=d.section),"previousSection"in d&&n(5,r=d.previousSection),"sectionId"in d&&n(1,i=d.sectionId),"canStart"in d&&n(2,k=d.canStart)},[s,i,k,L,E,r]}class qe extends de{constructor(e){super();he(this,e,Le,Ae,be,{section:0,previousSection:5,sectionId:1,canStart:2})}}export{qe as default,Oe as load};
