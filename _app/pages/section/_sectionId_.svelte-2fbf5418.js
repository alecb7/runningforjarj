import{S as we,i as De,s as Pe,e as N,k as V,c as L,a as B,d as o,m as j,b as ee,g as u,Y as m,w as H,x as J,y as U,q as h,o as D,B as F,t as p,h as $,j as O,l as de,p as ne,ac as Ne,n as ie,E as re}from"../../chunks/index-f7a6ba17.js";import{g as _e}from"../../chunks/colours-f9de8a07.js";import{B as ae}from"../../chunks/Button-a11b11dc.js";import{L as fe}from"../../chunks/Ripple-c9d7f540.js";import{h as C}from"../../chunks/moment-9ea79f3d.js";import{u as Le,g as pe}from"../../chunks/pace-3c977d72.js";function $e(a,e,l){const t=a.slice();return t[7]=e[l],t}function he(a){let e,l,t,i;return{c(){e=N("div"),l=N("div"),t=V(),i=N("div"),this.h()},l(n){e=L(n,"DIV",{class:!0});var r=B(e);l=L(r,"DIV",{class:!0}),B(l).forEach(o),t=j(r),i=L(r,"DIV",{class:!0}),B(i).forEach(o),r.forEach(o),this.h()},h(){ee(l,"class","ringring svelte-snrt10"),ee(i,"class","circle svelte-snrt10"),ee(e,"class","ring-container svelte-snrt10")},m(n,r){u(n,e,r),m(e,l),m(e,t),m(e,i)},d(n){n&&o(e)}}}function Be(a){let e=a[7].name+"",l;return{c(){l=p(e)},l(t){l=$(t,e)},m(t,i){u(t,l,i)},p(t,i){i&1&&e!==(e=t[7].name+"")&&O(l,e)},d(t){t&&o(l)}}}function Re(a){let e,l;return e=new fe({props:{$$slots:{default:[Be]},$$scope:{ctx:a}}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&1025&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function be(a){let e,l,t,i;return l=new ae({props:{href:`/runner/${a[7].userID}`,class:"runners-button",style:"background-color: "+_e(a[7].userID)+"; color: black",variant:"outlined",$$slots:{default:[Re]},$$scope:{ctx:a}}}),{c(){e=N("p"),H(l.$$.fragment),t=V(),this.h()},l(n){e=L(n,"P",{class:!0});var r=B(e);J(l.$$.fragment,r),t=j(r),r.forEach(o),this.h()},h(){ee(e,"class","runner svelte-snrt10")},m(n,r){u(n,e,r),U(l,e,null),m(e,t),i=!0},p(n,r){const v={};r&1&&(v.href=`/runner/${n[7].userID}`),r&1&&(v.style="background-color: "+_e(n[7].userID)+"; color: black"),r&1025&&(v.$$scope={dirty:r,ctx:n}),l.$set(v)},i(n){i||(h(l.$$.fragment,n),i=!0)},o(n){D(l.$$.fragment,n),i=!1},d(n){n&&o(e),F(l)}}}function Ve(a){let e,l;return e=new ae({props:{disabled:a[3],class:"start-button",variant:"raised",$$slots:{default:[qe]},$$scope:{ctx:a}}}),e.$on("click",a[5]),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&8&&(n.disabled=t[3]),i&1024&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function je(a){let e,l,t=C(a[4]).format("dddd: h:mma")+"",i;return{c(){e=N("p"),l=p("Started: "),i=p(t)},l(n){e=L(n,"P",{});var r=B(e);l=$(r,"Started: "),i=$(r,t),r.forEach(o)},m(n,r){u(n,e,r),m(e,l),m(e,i)},p(n,r){r&16&&t!==(t=C(n[4]).format("dddd: h:mma")+"")&&O(i,t)},i:re,o:re,d(n){n&&o(e)}}}function Ce(a){let e,l,t=C(a[0].startTime).format("dddd: h:mma")+"",i;return{c(){e=N("p"),l=p("Started: "),i=p(t)},l(n){e=L(n,"P",{});var r=B(e);l=$(r,"Started: "),i=$(r,t),r.forEach(o)},m(n,r){u(n,e,r),m(e,l),m(e,i)},p(n,r){r&1&&t!==(t=C(n[0].startTime).format("dddd: h:mma")+"")&&O(i,t)},i:re,o:re,d(n){n&&o(e)}}}function Oe(a){let e;return{c(){e=p("START")},l(l){e=$(l,"START")},m(l,t){u(l,e,t)},d(l){l&&o(e)}}}function qe(a){let e,l;return e=new fe({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&1024&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function ve(a){let e,l,t=C(a[0].endTime).format("ddd: h:mma")+"",i;return{c(){e=N("p"),l=p("Ended: "),i=p(t)},l(n){e=L(n,"P",{});var r=B(e);l=$(r,"Ended: "),i=$(r,t),r.forEach(o)},m(n,r){u(n,e,r),m(e,l),m(e,i)},p(n,r){r&1&&t!==(t=C(n[0].endTime).format("ddd: h:mma")+"")&&O(i,t)},d(n){n&&o(e)}}}function ke(a){let e,l,t=C(a[0].estimatedStartTime).format("ddd: h:mma")+"",i;return{c(){e=N("p"),l=p("Estimated start: "),i=p(t)},l(n){e=L(n,"P",{});var r=B(e);l=$(r,"Estimated start: "),i=$(r,t),r.forEach(o)},m(n,r){u(n,e,r),m(e,l),m(e,i)},p(n,r){r&1&&t!==(t=C(n[0].estimatedStartTime).format("ddd: h:mma")+"")&&O(i,t)},d(n){n&&o(e)}}}function Te(a){let e,l,t=C(a[0].estimatedEndTime).format("ddd: h:mma")+"",i;return{c(){e=N("p"),l=p("Estimated end: "),i=p(t)},l(n){e=L(n,"P",{});var r=B(e);l=$(r,"Estimated end: "),i=$(r,t),r.forEach(o)},m(n,r){u(n,e,r),m(e,l),m(e,i)},p(n,r){r&1&&t!==(t=C(n[0].estimatedEndTime).format("ddd: h:mma")+"")&&O(i,t)},d(n){n&&o(e)}}}function Ee(a){let e,l,t=pe(a[0].estimatedPace,a[0].distance,a[4]).format("ddd: h:mma")+"",i;return{c(){e=N("p"),l=p("Estimated end: "),i=p(t)},l(n){e=L(n,"P",{});var r=B(e);l=$(r,"Estimated end: "),i=$(r,t),r.forEach(o)},m(n,r){u(n,e,r),m(e,l),m(e,i)},p(n,r){r&17&&t!==(t=pe(n[0].estimatedPace,n[0].distance,n[4]).format("ddd: h:mma")+"")&&O(i,t)},d(n){n&&o(e)}}}function ge(a){let e,l;return e=new ae({props:{href:`/section/${parseInt(a[1])-1}`,variant:"outlined",$$slots:{default:[Ae]},$$scope:{ctx:a}}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&2&&(n.href=`/section/${parseInt(t[1])-1}`),i&1024&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function ze(a){let e;return{c(){e=p("Previous Section")},l(l){e=$(l,"Previous Section")},m(l,t){u(l,e,t)},d(l){l&&o(e)}}}function Ae(a){let e,l;return e=new fe({props:{$$slots:{default:[ze]},$$scope:{ctx:a}}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&1024&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Se(a){let e,l;return e=new ae({props:{href:`/section/${parseInt(a[1])+1}`,variant:"outlined",$$slots:{default:[He]},$$scope:{ctx:a}}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&2&&(n.href=`/section/${parseInt(t[1])+1}`),i&1024&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Ye(a){let e;return{c(){e=p("Next Section")},l(l){e=$(l,"Next Section")},m(l,t){u(l,e,t)},d(l){l&&o(e)}}}function He(a){let e,l;return e=new fe({props:{$$slots:{default:[Ye]},$$scope:{ctx:a}}}),{c(){H(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,i){U(e,t,i),l=!0},p(t,i){const n={};i&1024&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Je(a){let e,l,t=a[0].startLocation+"",i,n,r=a[0].endLocation+"",v,q,z,k,oe,le,A,se,T,E,K,M,Q,W,X,Z,y,x,P=(a[0].startTime||a[4])&&!a[0].endTime&&he(),G=a[0].users,c=[];for(let s=0;s<G.length;s+=1)c[s]=be($e(a,G,s));const Ie=s=>D(c[s],1,1,()=>{c[s]=null}),ce=[Ce,je,Ve],Y=[];function me(s,f){return s[0].startTime?0:s[4]?1:s[2]?2:-1}~(T=me(a))&&(E=Y[T]=ce[T](a));let g=a[0].endTime&&ve(a),S=a[0].estimatedStartTime&&!a[4]&&ke(a),I=a[0].estimatedEndTime&&!a[4]&&Te(a),w=a[0].estimatedEndTime&&a[4]&&Ee(a),d=a[1]!=="1"&&ge(a),_=a[1]!=="21"&&Se(a);return{c(){e=N("div"),l=N("h1"),i=p(t),n=p(" to "),v=p(r),q=V(),P&&P.c(),z=V(),k=N("p"),oe=p("Runners:"),le=V(),A=N("div");for(let s=0;s<c.length;s+=1)c[s].c();se=V(),E&&E.c(),K=V(),g&&g.c(),M=V(),S&&S.c(),Q=V(),I&&I.c(),W=V(),w&&w.c(),X=V(),d&&d.c(),Z=V(),_&&_.c(),y=de(),this.h()},l(s){e=L(s,"DIV",{class:!0});var f=B(e);l=L(f,"H1",{});var R=B(l);i=$(R,t),n=$(R," to "),v=$(R,r),R.forEach(o),q=j(f),P&&P.l(f),f.forEach(o),z=j(s),k=L(s,"P",{});var b=B(k);oe=$(b,"Runners:"),b.forEach(o),le=j(s),A=L(s,"DIV",{class:!0});var te=B(A);for(let ue=0;ue<c.length;ue+=1)c[ue].l(te);te.forEach(o),se=j(s),E&&E.l(s),K=j(s),g&&g.l(s),M=j(s),S&&S.l(s),Q=j(s),I&&I.l(s),W=j(s),w&&w.l(s),X=j(s),d&&d.l(s),Z=j(s),_&&_.l(s),y=de(),this.h()},h(){ee(e,"class","title-container svelte-snrt10"),ee(A,"class","runners svelte-snrt10")},m(s,f){u(s,e,f),m(e,l),m(l,i),m(l,n),m(l,v),m(e,q),P&&P.m(e,null),u(s,z,f),u(s,k,f),m(k,oe),u(s,le,f),u(s,A,f);for(let R=0;R<c.length;R+=1)c[R].m(A,null);u(s,se,f),~T&&Y[T].m(s,f),u(s,K,f),g&&g.m(s,f),u(s,M,f),S&&S.m(s,f),u(s,Q,f),I&&I.m(s,f),u(s,W,f),w&&w.m(s,f),u(s,X,f),d&&d.m(s,f),u(s,Z,f),_&&_.m(s,f),u(s,y,f),x=!0},p(s,[f]){if((!x||f&1)&&t!==(t=s[0].startLocation+"")&&O(i,t),(!x||f&1)&&r!==(r=s[0].endLocation+"")&&O(v,r),(s[0].startTime||s[4])&&!s[0].endTime?P||(P=he(),P.c(),P.m(e,null)):P&&(P.d(1),P=null),f&1){G=s[0].users;let b;for(b=0;b<G.length;b+=1){const te=$e(s,G,b);c[b]?(c[b].p(te,f),h(c[b],1)):(c[b]=be(te),c[b].c(),h(c[b],1),c[b].m(A,null))}for(ie(),b=G.length;b<c.length;b+=1)Ie(b);ne()}let R=T;T=me(s),T===R?~T&&Y[T].p(s,f):(E&&(ie(),D(Y[R],1,1,()=>{Y[R]=null}),ne()),~T?(E=Y[T],E?E.p(s,f):(E=Y[T]=ce[T](s),E.c()),h(E,1),E.m(K.parentNode,K)):E=null),s[0].endTime?g?g.p(s,f):(g=ve(s),g.c(),g.m(M.parentNode,M)):g&&(g.d(1),g=null),s[0].estimatedStartTime&&!s[4]?S?S.p(s,f):(S=ke(s),S.c(),S.m(Q.parentNode,Q)):S&&(S.d(1),S=null),s[0].estimatedEndTime&&!s[4]?I?I.p(s,f):(I=Te(s),I.c(),I.m(W.parentNode,W)):I&&(I.d(1),I=null),s[0].estimatedEndTime&&s[4]?w?w.p(s,f):(w=Ee(s),w.c(),w.m(X.parentNode,X)):w&&(w.d(1),w=null),s[1]!=="1"?d?(d.p(s,f),f&2&&h(d,1)):(d=ge(s),d.c(),h(d,1),d.m(Z.parentNode,Z)):d&&(ie(),D(d,1,1,()=>{d=null}),ne()),s[1]!=="21"?_?(_.p(s,f),f&2&&h(_,1)):(_=Se(s),_.c(),h(_,1),_.m(y.parentNode,y)):_&&(ie(),D(_,1,1,()=>{_=null}),ne())},i(s){if(!x){for(let f=0;f<G.length;f+=1)h(c[f]);h(E),h(d),h(_),x=!0}},o(s){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)D(c[f]);D(E),D(d),D(_),x=!1},d(s){s&&o(e),P&&P.d(),s&&o(z),s&&o(k),s&&o(le),s&&o(A),Ne(c,s),s&&o(se),~T&&Y[T].d(s),s&&o(K),g&&g.d(s),s&&o(M),S&&S.d(s),s&&o(Q),I&&I.d(s),s&&o(W),w&&w.d(s),s&&o(X),d&&d.d(s),s&&o(Z),_&&_.d(s),s&&o(y)}}}async function Xe({params:a,fetch:e}){const l="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com",t=a.sectionId,i=await e(`${l}/sections`),n=await i.json(),r=Le(n),v=r.find(k=>k.sectionID===t);let z=!!(t>1?r.find(k=>k.sectionID===`${parseInt(t)-1}`):{}).startTime&&!v.startTime||t==="1"&&!v.startTime;return{status:i.status,props:{section:v,sectionId:t,canStart:z}}}function Ue(a,e,l){const t="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com";let{section:i}=e,{sectionId:n}=e,{canStart:r}=e,v,q;const z=async()=>{l(3,v=!0),l(4,q=C().toISOString()),await fetch(`${t}/sections/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sectionID:n,startTime:q})}),l(3,v=!1),window.alert("Your section has been started, good luck!")};return a.$$set=k=>{"section"in k&&l(0,i=k.section),"sectionId"in k&&l(1,n=k.sectionId),"canStart"in k&&l(2,r=k.canStart)},[i,n,r,v,q,z]}class Ze extends we{constructor(e){super();De(this,e,Ue,Je,Pe,{section:0,sectionId:1,canStart:2})}}export{Ze as default,Xe as load};
