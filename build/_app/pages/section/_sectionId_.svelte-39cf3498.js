import{S as Te,i as Se,s as Ie,e as P,k as R,c as L,a as B,d as f,m as V,b as y,g as u,Y as h,w as z,x as A,y as H,q as $,o as I,B as J,t as E,h as w,j as F,l as ce,p as le,a7 as Ee,n as ne,E as ue}from"../../chunks/index-140bc288.js";import{g as me}from"../../chunks/colours-f9de8a07.js";import{B as se}from"../../chunks/Button-d5e97f4c.js";import{L as ie}from"../../chunks/Ripple-dfc7c852.js";import{h as j}from"../../chunks/moment-9ea79f3d.js";import{u as we}from"../../chunks/pace-0accffcb.js";function _e(r,e,l){const t=r.slice();return t[7]=e[l],t}function de(r){let e,l,t,i;return{c(){e=P("div"),l=P("div"),t=R(),i=P("div"),this.h()},l(s){e=L(s,"DIV",{class:!0});var o=B(e);l=L(o,"DIV",{class:!0}),B(l).forEach(f),t=V(o),i=L(o,"DIV",{class:!0}),B(i).forEach(f),o.forEach(f),this.h()},h(){y(l,"class","ringring svelte-snrt10"),y(i,"class","circle svelte-snrt10"),y(e,"class","ring-container svelte-snrt10")},m(s,o){u(s,e,o),h(e,l),h(e,t),h(e,i)},d(s){s&&f(e)}}}function De(r){let e=r[7].name+"",l;return{c(){l=E(e)},l(t){l=w(t,e)},m(t,i){u(t,l,i)},p(t,i){i&1&&e!==(e=t[7].name+"")&&F(l,e)},d(t){t&&f(l)}}}function Ne(r){let e,l;return e=new ie({props:{$$slots:{default:[De]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&1025&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function $e(r){let e,l,t,i;return l=new se({props:{href:`/runner/${r[7].userID}`,class:"runners-button",style:"background-color: "+me(r[7].userID)+"; color: black",variant:"outlined",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),{c(){e=P("p"),z(l.$$.fragment),t=R(),this.h()},l(s){e=L(s,"P",{class:!0});var o=B(e);A(l.$$.fragment,o),t=V(o),o.forEach(f),this.h()},h(){y(e,"class","runner svelte-snrt10")},m(s,o){u(s,e,o),H(l,e,null),h(e,t),i=!0},p(s,o){const b={};o&1&&(b.href=`/runner/${s[7].userID}`),o&1&&(b.style="background-color: "+me(s[7].userID)+"; color: black"),o&1025&&(b.$$scope={dirty:o,ctx:s}),l.$set(b)},i(s){i||($(l.$$.fragment,s),i=!0)},o(s){I(l.$$.fragment,s),i=!1},d(s){s&&f(e),J(l)}}}function Pe(r){let e,l;return e=new se({props:{disabled:r[3],class:"start-button",variant:"raised",$$slots:{default:[Re]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&8&&(s.disabled=t[3]),i&1024&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Le(r){let e,l,t=j(r[0].startTime).format("dddd: h:mma")+"",i;return{c(){e=P("p"),l=E("Started: "),i=E(t)},l(s){e=L(s,"P",{});var o=B(e);l=w(o,"Started: "),i=w(o,t),o.forEach(f)},m(s,o){u(s,e,o),h(e,l),h(e,i)},p(s,o){o&1&&t!==(t=j(s[0].startTime).format("dddd: h:mma")+"")&&F(i,t)},i:ue,o:ue,d(s){s&&f(e)}}}function Be(r){let e;return{c(){e=E("START")},l(l){e=w(l,"START")},m(l,t){u(l,e,t)},d(l){l&&f(e)}}}function Re(r){let e,l;return e=new ie({props:{$$slots:{default:[Be]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&1024&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function pe(r){let e,l,t=j(r[0].endTime).format("ddd: h:mma")+"",i;return{c(){e=P("p"),l=E("Ended: "),i=E(t)},l(s){e=L(s,"P",{});var o=B(e);l=w(o,"Ended: "),i=w(o,t),o.forEach(f)},m(s,o){u(s,e,o),h(e,l),h(e,i)},p(s,o){o&1&&t!==(t=j(s[0].endTime).format("ddd: h:mma")+"")&&F(i,t)},d(s){s&&f(e)}}}function he(r){let e,l,t=j(r[0].estimatedStartTime).format("ddd: h:mma")+"",i;return{c(){e=P("p"),l=E("Estimated start: "),i=E(t)},l(s){e=L(s,"P",{});var o=B(e);l=w(o,"Estimated start: "),i=w(o,t),o.forEach(f)},m(s,o){u(s,e,o),h(e,l),h(e,i)},p(s,o){o&1&&t!==(t=j(s[0].estimatedStartTime).format("ddd: h:mma")+"")&&F(i,t)},d(s){s&&f(e)}}}function be(r){let e,l,t=j(r[0].estimatedEndTime).format("ddd: h:mma")+"",i;return{c(){e=P("p"),l=E("Estimated end: "),i=E(t)},l(s){e=L(s,"P",{});var o=B(e);l=w(o,"Estimated end: "),i=w(o,t),o.forEach(f)},m(s,o){u(s,e,o),h(e,l),h(e,i)},p(s,o){o&1&&t!==(t=j(s[0].estimatedEndTime).format("ddd: h:mma")+"")&&F(i,t)},d(s){s&&f(e)}}}function ve(r){let e,l;return e=new se({props:{href:`/section/${parseInt(r[1])-1}`,variant:"outlined",$$slots:{default:[je]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&2&&(s.href=`/section/${parseInt(t[1])-1}`),i&1024&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ve(r){let e;return{c(){e=E("Previous Section")},l(l){e=w(l,"Previous Section")},m(l,t){u(l,e,t)},d(l){l&&f(e)}}}function je(r){let e,l;return e=new ie({props:{$$slots:{default:[Ve]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&1024&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function ke(r){let e,l;return e=new se({props:{href:`/section/${parseInt(r[1])+1}`,variant:"outlined",$$slots:{default:[Oe]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&2&&(s.href=`/section/${parseInt(t[1])+1}`),i&1024&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function Ce(r){let e;return{c(){e=E("Next Section")},l(l){e=w(l,"Next Section")},m(l,t){u(l,e,t)},d(l){l&&f(e)}}}function Oe(r){let e,l;return e=new ie({props:{$$slots:{default:[Ce]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,i){H(e,t,i),l=!0},p(t,i){const s={};i&1024&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function qe(r){let e,l,t=r[0].startLocation+"",i,s,o=r[0].endLocation+"",b,U,C,m,re,ee,O,te,v,k,G,K,M,Q,W,X,Z,D=r[4]&&!r[0].endTime&&de(),Y=r[0].users,c=[];for(let n=0;n<Y.length;n+=1)c[n]=$e(_e(r,Y,n));const ge=n=>I(c[n],1,1,()=>{c[n]=null}),ae=[Le,Pe],q=[];function fe(n,a){return n[4]?0:n[2]?1:-1}~(v=fe(r))&&(k=q[v]=ae[v](r));let g=r[0].endTime&&pe(r),T=r[0].estimatedStartTime&&he(r),S=r[0].estimatedEndTime&&be(r),_=r[1]!=="1"&&ve(r),d=r[1]!=="21"&&ke(r);return{c(){e=P("div"),l=P("h1"),i=E(t),s=E(" to "),b=E(o),U=R(),D&&D.c(),C=R(),m=P("p"),re=E("Runners:"),ee=R(),O=P("div");for(let n=0;n<c.length;n+=1)c[n].c();te=R(),k&&k.c(),G=R(),g&&g.c(),K=R(),T&&T.c(),M=R(),S&&S.c(),Q=R(),_&&_.c(),W=R(),d&&d.c(),X=ce(),this.h()},l(n){e=L(n,"DIV",{class:!0});var a=B(e);l=L(a,"H1",{});var N=B(l);i=w(N,t),s=w(N," to "),b=w(N,o),N.forEach(f),U=V(a),D&&D.l(a),a.forEach(f),C=V(n),m=L(n,"P",{});var p=B(m);re=w(p,"Runners:"),p.forEach(f),ee=V(n),O=L(n,"DIV",{class:!0});var x=B(O);for(let oe=0;oe<c.length;oe+=1)c[oe].l(x);x.forEach(f),te=V(n),k&&k.l(n),G=V(n),g&&g.l(n),K=V(n),T&&T.l(n),M=V(n),S&&S.l(n),Q=V(n),_&&_.l(n),W=V(n),d&&d.l(n),X=ce(),this.h()},h(){y(e,"class","title-container svelte-snrt10"),y(O,"class","runners svelte-snrt10")},m(n,a){u(n,e,a),h(e,l),h(l,i),h(l,s),h(l,b),h(e,U),D&&D.m(e,null),u(n,C,a),u(n,m,a),h(m,re),u(n,ee,a),u(n,O,a);for(let N=0;N<c.length;N+=1)c[N].m(O,null);u(n,te,a),~v&&q[v].m(n,a),u(n,G,a),g&&g.m(n,a),u(n,K,a),T&&T.m(n,a),u(n,M,a),S&&S.m(n,a),u(n,Q,a),_&&_.m(n,a),u(n,W,a),d&&d.m(n,a),u(n,X,a),Z=!0},p(n,[a]){if((!Z||a&1)&&t!==(t=n[0].startLocation+"")&&F(i,t),(!Z||a&1)&&o!==(o=n[0].endLocation+"")&&F(b,o),n[4]&&!n[0].endTime?D||(D=de(),D.c(),D.m(e,null)):D&&(D.d(1),D=null),a&1){Y=n[0].users;let p;for(p=0;p<Y.length;p+=1){const x=_e(n,Y,p);c[p]?(c[p].p(x,a),$(c[p],1)):(c[p]=$e(x),c[p].c(),$(c[p],1),c[p].m(O,null))}for(ne(),p=Y.length;p<c.length;p+=1)ge(p);le()}let N=v;v=fe(n),v===N?~v&&q[v].p(n,a):(k&&(ne(),I(q[N],1,1,()=>{q[N]=null}),le()),~v?(k=q[v],k?k.p(n,a):(k=q[v]=ae[v](n),k.c()),$(k,1),k.m(G.parentNode,G)):k=null),n[0].endTime?g?g.p(n,a):(g=pe(n),g.c(),g.m(K.parentNode,K)):g&&(g.d(1),g=null),n[0].estimatedStartTime?T?T.p(n,a):(T=he(n),T.c(),T.m(M.parentNode,M)):T&&(T.d(1),T=null),n[0].estimatedEndTime?S?S.p(n,a):(S=be(n),S.c(),S.m(Q.parentNode,Q)):S&&(S.d(1),S=null),n[1]!=="1"?_?(_.p(n,a),a&2&&$(_,1)):(_=ve(n),_.c(),$(_,1),_.m(W.parentNode,W)):_&&(ne(),I(_,1,1,()=>{_=null}),le()),n[1]!=="21"?d?(d.p(n,a),a&2&&$(d,1)):(d=ke(n),d.c(),$(d,1),d.m(X.parentNode,X)):d&&(ne(),I(d,1,1,()=>{d=null}),le())},i(n){if(!Z){for(let a=0;a<Y.length;a+=1)$(c[a]);$(k),$(_),$(d),Z=!0}},o(n){c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)I(c[a]);I(k),I(_),I(d),Z=!1},d(n){n&&f(e),D&&D.d(),n&&f(C),n&&f(m),n&&f(ee),n&&f(O),Ee(c,n),n&&f(te),~v&&q[v].d(n),n&&f(G),g&&g.d(n),n&&f(K),T&&T.d(n),n&&f(M),S&&S.d(n),n&&f(Q),_&&_.d(n),n&&f(W),d&&d.d(n),n&&f(X)}}}async function Ge({params:r,fetch:e}){const l="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com",t=r.sectionId,i=await e(`${l}/sections`),s=await i.json(),o=we(s),b=o.find(m=>m.sectionID===t);let C=!!(t>1?o.find(m=>m.sectionID===`${parseInt(t)-1}`):{}).startTime&&!b.startTime||t==="1"&&!b.startTime;return{status:i.status,props:{section:b,sectionId:t,canStart:C}}}function ze(r,e,l){const t="https://heh5n0uiid.execute-api.eu-west-1.amazonaws.com";let{section:i}=e,{sectionId:s}=e,{canStart:o}=e,b,U=i.startTime;const C=async()=>{l(3,b=!0);const m=j().toISOString();await fetch(`${t}/sections/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sectionID:s,startTime:m})}),l(4,U=m),l(3,b=!1)};return r.$$set=m=>{"section"in m&&l(0,i=m.section),"sectionId"in m&&l(1,s=m.sectionId),"canStart"in m&&l(2,o=m.canStart)},[i,s,o,b,U,C]}class Ke extends Te{constructor(e){super();Se(this,e,ze,qe,Ie,{section:0,sectionId:1,canStart:2})}}export{Ke as default,Ge as load};
